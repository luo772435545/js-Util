<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="./dist/util.js"></script>
    <style>
        *{margin: 0;padding: 0}
        #ccc{margin: 50px;padding-top: 30px;width: 50px;height:40px;border: 0;display: block;background-color: red}
    </style>
</head>
<body>
<div style="width: 300px;margin: 100px auto;">
    <span id="ccc">123</span>
</div>
<div class="cod ppp">12312312</div>
<script>
    console.log(window)
    console.log(window.util)

    var gg={a:'cc',d:'gcc',j:'asc'};
    var gt={a:'cc'};

    var EventTarget=function () {
        this._listeners={}
    }

    EventTarget.prototype = {
        constructor:this,
        // 添加
        addEvent(type, fn) {
            if (typeof this._listeners[type] === "undefined") {
                this._listeners[type] = [];
            }
            if (typeof fn === "function") {
                this._listeners[type].push(fn);
            }
            return this;
        },
        // 触发
        emitEvent(type) {
            var arrayEvent = this._listeners[type];
            console.log(arrayEvent)
            if (arrayEvent instanceof Array) {
                for (var i=0; i<arrayEvent.length; i++) {
                    if (typeof arrayEvent[i] === "function") {
                        arrayEvent[i]({ type: type });
                    }
                }
            }
            return this;
        },
        // 删除
        removeEvent(type, fn) {
            var arrayEvent = this._listeners[type];
            if (typeof type === "string" && arrayEvent instanceof Array) {
                if (typeof fn === "function") {
                    // 清除当前type类型事件下对应fn方法
                    for (var i=0; i<arrayEvent.length; i++){
                        if (arrayEvent[i] === fn){
                            this._listeners[type].splice(i, 1);
                            break;
                        }
                    }
                } else {
                    // 如果仅仅参数type, 或参数fn邪魔外道，则所有type类型事件清除
                    delete this._listeners[type];
                }
            }
            return this;
        }
    };

    console.log(util)
    util.addEvent('alert',function () {
        alert('弹出1')
    }).emitEvent("alert");


   /*  function addEvent(type, fn, capture) {
        var el = this.el;
        if (window.addEventListener) {
            el.addEventListener(type, fn, capture);
        } else if (window.attachEvent) {
            el.attachEvent("on" + type, fn);
        }
        return this;
    }*/

   /* function isReserved (str) {
        var c = (str + '').charCodeAt(0);
        return c === 0x24 || c === 0x5F
    }

    console.log(isReserved('$15454'));*/
   /* var bailRE = /[^\w.$]/;
    function parsePath (path) {
        if (bailRE.test(path)) {
            return
        }
        var segments = path.split('.');
        return function (obj) {
            for (var i = 0; i < segments.length; i++) {
                if (!obj) { return }
                obj = obj[segments[i]];
            }
            return obj
        }
    }
    console.log(parsePath('/a/ca?id=123'))*/
   /* var kjo=JSON.stringify(gg,null,2);
    console.log(JSON.parse(kjo))
     var arr=['cac','asc','asc','av'];
    console.log(arr)
    arr.splice(arr.indexOf('av'),1)
    console.log(arr)*/


   /* function once (fn) {
        var called = false;
        return function () {
            if (!called) {
                called = true;
                fn.apply(this, arguments);
            }
        }
    }

    once(function (c,d) {
      console.log(c,d);
    })('avvas','aaa')
    */
    
/*    console.log(Object.keys(gg));
    console.log(Object.keys(gt));*/
  //  console.log(util.looseEqual(gg,gt))
   /*function abc(a,b) {
       console.log(a);
       return {
           abc:function (c) {
               return abc(c,a)
           }
       }
   }
   var d=abc(0);
  var c=abc(0).abc;c.abc(3);

  console.log(c);*/
    //0 2 error
</script>
</body>
</html>